# Broken pipe

## java.io.SocketException

- 잦은 입출력 호출로 인해 발생하는 오류
- request에 대한 응답이 이루어지지 않았는데 client가 새로고침을 자주하면 소켓이 끊어지면서 생기는 오류

### 동작 원리

- 웹 브라우저에서 서버에 연결하면 accept된 웹 socket을 HttpThread에 넘기고, ThreadPool에서 조건에 맞으면 해당 HttpThread를 기동하게 되어있다.

### 오류 원인

- HttpThread가 완료되기 전까지 다시 재요청을 하지않으면 문제가 없음. 완료되기 전에 재요청을 할 경우 처음 요청때 생성된 Socket의 자원을 httpThread.run()에서 사용하려고 하는 중에, 두번째 요청이 들어와 첫번째 요청의 Socket이 끊어짐

## java.io.IOException

- receiver에서 송신 받은 데이터를 제 때 처리하지 못하는 상황(네트워크가 느리거나 서버의 CPU가 max인 경우)에서 sender가 계속 보내는 상황

### 원인

- 2개의 소켓상 통신에서 소켓을 담당하던 프로세서가 갑작스런 이상으로 종료가 된 상황일때 상대 소켓은 이를 알지 못하고 데이터를 전송하려하면 문제가 발생

### 발생상황

- 클라이언트가 요청했는데, 서버에서 작업을 완료하여 응답하기전에 네트워크가 끊김, 등의 최초 정보가 사라졌을 때 응답을 전달할 곳이 없어 발생

## 해결방법

- 속도가 조금 느리더라도 client에서 응답 기다리기
- Exception 무시하기
- 중복 요청 막기
